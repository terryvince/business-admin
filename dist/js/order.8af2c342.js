(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order"],{"634a":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order"},[i("el-form",{staticClass:"flex-main-start",attrs:{inline:!0,"label-position":"left",model:e.form,size:"mini"}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1),i("el-form-item",[i("el-select",{attrs:{placeholder:"请选择商品类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-option",{attrs:{label:"物流商品",value:"ship"}}),i("el-option",{attrs:{label:"核销商品",value:"code"}})],1)],1),i("el-form-item",[i("el-input",{attrs:{placeholder:"订单号/手机号/昵称/姓名"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),i("el-form-item",[i("el-select",{attrs:{placeholder:"订单状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.orderStatus,(function(e){return i("el-option",{key:e.type,attrs:{value:e.type,label:e.name}})})),1)],1),i("el-form-item",[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.form.timeRange,callback:function(t){e.$set(e.form,"timeRange",t)},expression:"form.timeRange"}})],1),i("el-form-item",[i("el-button",{staticClass:"left-20",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")]),i("el-button",{staticClass:"left-20",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("导出到Excel")])],1)],1),i("el-divider",{attrs:{direction:"horizontal"}}),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[i("el-table-column",{attrs:{label:"序号",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+1))])]}}])}),i("el-table-column",{attrs:{prop:"t_tid",label:"订单号",width:"200px"}}),i("el-table-column",{attrs:{prop:"to_title",label:"订单商品",width:"180px"}}),i("el-table-column",{attrs:{prop:"goods_type_txt",label:"商品类型",width:"90"}}),i("el-table-column",{attrs:{label:"商品数量/核销码",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("span",[i("p",[e._v("核销剩余:"+e._s(t.row.ticket_valid))]),i("p",[e._v("已被核销:"+e._s(t.row.ticket_used))]),i("p",[e._v("商品数量:"+e._s(t.row.to_num))])])])]}}])}),i("el-table-column",{attrs:{prop:"g_seller_price",label:"结算价",width:"100"}}),i("el-table-column",{attrs:{label:"收货信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("p",[e._v("昵称: "+e._s(t.row.t_buyer_nick))]),i("p",[e._v("电话: "+e._s(t.row.t_phone_ext))]),i("p",[e._v("地址: "+e._s("code"==t.row.g_verify_type?"无需地址":t.row.t_address_ext))])])]}}])}),i("el-table-column",{attrs:{prop:"t_note",label:"备注"}}),i("el-table-column",{attrs:{prop:"t_pay_time",label:"支付时间"}}),i("el-table-column",{attrs:{prop:"t_status_txt",label:"状态"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",["ship"==t.row.g_verify_type&&3==t.row.t_status?i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.getShipping(t.row.t_tid)}}},[e._v("发货")]):e._e(),"ship"==t.row.g_verify_type&&4==t.row.t_status?i("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(i){return e.showEditDialog(t.row)}}},[e._v("修改收货信息")]):e._e(),"ship"==t.row.g_verify_type&&4==t.row.t_status?i("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(i){return e.showShipping(t.row)}}},[e._v("查看物流信息")]):e._e()],1)]}}])})],1),i("div",{staticClass:"block top-20"},[i("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,50],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1),i("el-dialog",{attrs:{title:"发货",visible:e.shipping_dialog,width:"30%",center:""},on:{"update:visible":function(t){e.shipping_dialog=t}}},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"物流公司"}},[i("el-select",{attrs:{placeholder:"物流公司"},model:{value:e.dialogForm.company,callback:function(t){e.$set(e.dialogForm,"company",t)},expression:"dialogForm.company"}},e._l(e.shipping,(function(e,t){return i("el-option",{key:t,attrs:{value:e}})})),1)],1),i("el-form-item",{attrs:{label:"物流单号",prop:"code"}},[i("el-input",{attrs:{placeholder:"物流单号"},model:{value:e.dialogForm.code,callback:function(t){e.$set(e.dialogForm,"code",t)},expression:"dialogForm.code"}})],1),i("el-form-item",{attrs:{label:"备注信息",prop:"expressNote"}},[i("el-input",{attrs:{placeholder:"备注信息"},model:{value:e.dialogForm.expressNote,callback:function(t){e.$set(e.dialogForm,"expressNote",t)},expression:"dialogForm.expressNote"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.shipping_dialog=!1}}},[e._v("关闭")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitShipping()}}},[e._v("确认发货")])],1)],1),i("el-dialog",{attrs:{title:"修改收货信息",visible:e.edit_dialog,width:"30%",center:""},on:{"update:visible":function(t){e.edit_dialog=t}}},[i("el-form",{ref:"dialog_address",attrs:{model:e.dialog_address,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"收货地址",prop:"address"}},[i("el-input",{attrs:{placeholder:"收货地址"},model:{value:e.dialog_address.address,callback:function(t){e.$set(e.dialog_address,"address",t)},expression:"dialog_address.address"}})],1),i("el-form-item",{attrs:{label:"电话",prop:"phone"}},[i("el-input",{attrs:{placeholder:"电话"},model:{value:e.dialog_address.phone,callback:function(t){e.$set(e.dialog_address,"phone",t)},expression:"dialog_address.phone"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.edit_dialog=!1}}},[e._v("关闭")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeReceive()}}},[e._v("确认修改")])],1)],1),i("el-dialog",{attrs:{title:"物流信息",visible:e.shipping_detail_dialog,width:"30%",center:""},on:{"update:visible":function(t){e.shipping_detail_dialog=t}}},[i("el-form",{attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:"物流公司："}},[i("span",[e._v(e._s(e.shipping_detail.company))])]),i("el-form-item",{attrs:{label:"物流单号："}},[i("span",[e._v(e._s(e.shipping_detail.shipping_no))])]),i("el-form-item",{attrs:{label:"发货时间："}},[i("span",[e._v(e._s(e.shipping_detail.express_time))])]),i("el-form-item",{attrs:{label:"发货备注："}},[i("span",[e._v(e._s(e.shipping_detail.express_note))])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.shipping_detail_dialog=!1}}},[e._v("关闭")])],1)],1)],1)},o=[],s=i("c7e8"),l=[{type:"wait_send",name:"待发货"},{type:"wait_use",name:"待核销"},{type:"send",name:"已发货"},{type:"confirm",name:"已收货"},{type:"complete",name:"已完成"}],r={name:"order",data:function(){return{form:{keyword:"",type:"",timeRange:"",status:"",phone:""},total:0,page:1,size:10,list:[],orderStatus:l,shipping_dialog:!1,shipping_detail_dialog:!1,shipping_detail:{company:"",shipping_no:"",express_time:"",express_note:""},edit_dialog:!1,shipping:[],dialogForm:{code:"",company:"",tid:"",express:"",expressNote:""},dialog_address:{address:"",phone:""}}},created:function(){this.getList()},components:{},methods:{onSubmit:function(){this.getList()},handleSizeChange:function(e){this.page=1,this.size=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},getList:function(){var e=this;Object(s["f"])(this.page,this.size,this.form).then((function(t){var i=t.data;if(200!==i.ec)return e.$message.error(i.em),!1;e.list=i.data.list,e.total=i.data.count}))},getShipping:function(e){var t=this;this.$refs["dialogForm"].resetFields(),this.dialogForm.tid=e,0==this.shipping.length&&Object(s["h"])().then((function(e){var i=e.data;if(200!==i.ec)return t.$message.error(i.em),!1;t.shipping=i.data})),this.shipping_dialog=!0},submitShipping:function(){var e=this;for(var t in this.shipping)if(this.shipping[t]==this.dialogForm.company){this.dialogForm.express=t;break}Object(s["c"])(this.dialogForm).then((function(t){var i=t.data;if(200!==i.ec)return e.$message.error(i.em),!1;e.getList(),e.shipping_dialog=!1}))},showEditDialog:function(e){this.dialog_address.id=e.t_id,this.dialog_address.address=e.t_address_ext,this.dialog_address.phone=e.t_phone_ext,this.edit_dialog=!0},changeReceive:function(){var e=this;this.$confirm("确定要修改吗",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])(e.dialog_address).then((function(t){var i=t.data;if(200!==i.ec)return e.$message.error(i.em),!1;e.edit_dialog=!1,e.$message({message:"修改成功",type:"success"}),e.getList()}))}))},showShipping:function(e){this.shipping_detail_dialog=!0,this.shipping_detail.company=e.t_express_company,this.shipping_detail.shipping_no=e.t_express_code,this.shipping_detail.express_time=e.t_express_time,this.shipping_detail.express_note=e.t_express_note}}},n=r,p=(i("dac8"),i("2877")),d=Object(p["a"])(n,a,o,!1,null,null,null);t["default"]=d.exports},"9c7b":function(e,t,i){},dac8:function(e,t,i){"use strict";var a=i("9c7b"),o=i.n(a);o.a}}]);
//# sourceMappingURL=order.8af2c342.js.map